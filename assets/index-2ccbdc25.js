import{F as J,u as K}from"./provide-54996f70.js";import{I as X}from"./index-33db06d9.js";import{d as t,i as Y,b as i,c as x}from"./components-02edd959.js";import{d as _,a as F,t as ee,b as P,aF as b,o as ne,Z as z,n as le,_ as ae,p as U,f as m,h,M as g,N as d,O,j as V,R as p,Q as oe,i as se,q as re}from"./vue-router.esm-bundler-0d52b99f.js";function de(e){return["text","password","number"].includes(e)}const ie={modelValue:{type:String},modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text",validator:de},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:t(),onBlur:t(),onClick:t(),onClear:t(),onInput:t(),onChange:t(),"onUpdate:modelValue":t()},{n:I,classes:te}=x("input"),ue=_({name:"VarInput",components:{VarIcon:X,VarFormDetails:J},props:ie,setup(e){const a=F(`var-input-${ee().uid}`),y=F(null),f=F(!1),M=P(()=>e.type==="number"?"text":e.type),S=P(()=>{const{maxlength:n,modelValue:r}=e;return n?b(r)?`0 / ${n}`:`${String(r).length}/${n}`:""}),{bindForm:C,form:o}=K(),{errorMessage:s,validateWithTrigger:R,validate:c,resetValidation:v}=Y(),u=n=>{le(()=>{const{validateTrigger:r,rules:l,modelValue:B}=e;R(r,n,l,B)})},E=()=>{const{hint:n,modelValue:r}=e;if(!n&&!b(r))return I("--placeholder-hidden");if(n&&(!b(r)||f.value))return I("--placeholder-hint")},j=n=>{f.value=!0,i(e.onFocus,n),u("onFocus")},A=n=>{f.value=!1,i(e.onBlur,n),u("onBlur")},W=n=>{const r=n.target;let{value:l}=r;e.type==="number"&&(l=Z(l)),l=w(T(l)),r.value=l,i(e["onUpdate:modelValue"],l),i(e.onInput,l,n),u("onInput")},q=n=>{const r=n.target;let{value:l}=r;e.type==="number"&&(l=z(l).toString(),i(e["onUpdate:modelValue"],l)),l=w(T(l)),r.value=l,i(e.onChange,l,n),u("onChange")},L=()=>{const{disabled:n,readonly:r,clearable:l,onClear:B}=e;o!=null&&o.disabled.value||o!=null&&o.readonly.value||n||r||!l||(i(e["onUpdate:modelValue"],""),i(B,""),u("onClear"))},Q=n=>{const{disabled:r,onClick:l}=e;o!=null&&o.disabled.value||r||(i(l,n),u("onClick"))},Z=n=>{const r=n.indexOf("-"),l=n.indexOf(".");return r>-1&&(n=r===0?"-"+n.replace(/-/g,""):n.replace(/-/g,"")),l>-1&&(n=n.slice(0,l+1)+n.slice(l).replace(/\./g,"")),n.replace(/[^-0-9.]/g,"")},T=n=>e.modelModifiers.trim?n.trim():n,w=n=>e.maxlength?n.slice(0,z(e.maxlength)):n,G=n=>{const{disabled:r,readonly:l}=e;o!=null&&o.disabled.value||o!=null&&o.readonly.value||r||l||n.stopPropagation()},D=()=>{i(e["onUpdate:modelValue"],""),v()},$=()=>c(e.rules,e.modelValue),N=()=>{var n;(n=y.value)==null||n.focus()},H=()=>{y.value.blur()};return i(C,{reset:D,validate:$,resetValidation:v}),ne(()=>{e.autofocus&&N()}),{el:y,id:a,isFocus:f,errorMessage:s,type:M,maxlengthText:S,formDisabled:o==null?void 0:o.disabled,formReadonly:o==null?void 0:o.readonly,n:I,classes:te,isEmpty:b,computePlaceholderState:E,handleFocus:j,handleBlur:A,handleInput:W,handleChange:q,handleClear:L,handleClick:Q,handleTouchstart:G,validate:$,resetValidation:v,reset:D,focus:N,blur:H}}});const me=["id","disabled","type","value","maxlength","rows"],ge=["id","disabled","type","value","maxlength"],pe=["for"];function fe(e,a,y,f,M,S){const C=U("var-icon"),o=U("var-form-details");return m(),h("div",{class:d(e.classes(e.n(),e.n("$--box"),[e.disabled,e.n("--disabled")])),onClick:a[10]||(a[10]=(...s)=>e.handleClick&&e.handleClick(...s))},[g("div",{class:d(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:p({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[g("div",{class:d(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[O(e.$slots,"prepend-icon")],2),g("div",{class:d(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")]))},[e.type==="password"?(m(),h("input",{key:0,class:d(e.n("autocomplete"))},null,2)):V("",!0),e.textarea?(m(),h("textarea",{key:1,class:d(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,rows:e.rows,style:p({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none"}),onFocus:a[0]||(a[0]=(...s)=>e.handleFocus&&e.handleFocus(...s)),onBlur:a[1]||(a[1]=(...s)=>e.handleBlur&&e.handleBlur(...s)),onInput:a[2]||(a[2]=(...s)=>e.handleInput&&e.handleInput(...s)),onChange:a[3]||(a[3]=(...s)=>e.handleChange&&e.handleChange(...s)),onTouchstart:a[4]||(a[4]=(...s)=>e.handleTouchstart&&e.handleTouchstart(...s))},`
        `,46,me)):(m(),h("input",{key:2,class:d(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,style:p({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor}),onFocus:a[5]||(a[5]=(...s)=>e.handleFocus&&e.handleFocus(...s)),onBlur:a[6]||(a[6]=(...s)=>e.handleBlur&&e.handleBlur(...s)),onInput:a[7]||(a[7]=(...s)=>e.handleInput&&e.handleInput(...s)),onChange:a[8]||(a[8]=(...s)=>e.handleChange&&e.handleChange(...s)),onTouchstart:a[9]||(a[9]=(...s)=>e.handleTouchstart&&e.handleTouchstart(...s))},null,46,ge)),g("label",{class:d(e.classes(e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.textarea,e.n("textarea-placeholder"),e.n("placeholder")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:p({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor}),for:e.id},oe(e.placeholder),15,pe)],2),g("div",{class:d(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[O(e.$slots,"append-icon",{},()=>[e.clearable&&!e.isEmpty(e.modelValue)?(m(),se(C,{key:0,class:d(e.n("clear-icon")),"var-input-cover":"",name:"close-circle",onClick:e.handleClear},null,8,["class","onClick"])):V("",!0)])],2)],6),e.line?(m(),h("div",{key:0,class:d(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:p({background:e.errorMessage?void 0:e.blurColor})},[g("div",{class:d(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:p({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):V("",!0),re(o,{"error-message":e.errorMessage,"extra-message":e.maxlengthText},null,8,["error-message","extra-message"])],2)}const k=ae(ue,[["render",fe]]);k.install=function(e){e.component(k.name,k)};export{k as I};
